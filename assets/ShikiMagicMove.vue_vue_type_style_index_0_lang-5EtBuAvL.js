import{d as P,z as oe,h as D,r as q,L as re,I as le,p as U,K as ae,f as V,i as ce,o as K,n as he,N as ue,e as X,g as ge,t as fe,C as R}from"./modules/vue-FhxqsIXc.js";import{m as pe,h as ye,n as me,C as de,a6 as ve,a7 as be}from"./index-9_lc_Vu1.js";import{l as _e}from"./lz-string-ClkztLv7.js";import{u as we}from"./slidev/context-D6pSwNsp.js";const Se=Object.freeze({diffTimeout:1,diffEditCost:4,matchThreshold:.5,matchDistance:1e3,patchDeleteThreshold:.5,patchMargin:4,matchMaxBits:32});function Ce(s){if(s?.__resolved)return s;const t={...Se,...s};return Object.defineProperty(t,"__resolved",{value:!0,enumerable:!1}),t}const M=-1,E=1,C=0;function S(s,t){return[s,t]}function B(s,t,e,n=!0,i){const o=Ce(e);typeof i>"u"&&(o.diffTimeout<=0?i=Number.MAX_VALUE:i=new Date().getTime()+o.diffTimeout*1e3);const r=i;if(s==null||t==null)throw new Error("Null input. (diff_main)");if(s===t)return s?[S(C,s)]:[];const c=n;let l=H(s,t);const h=s.substring(0,l);s=s.substring(l),t=t.substring(l),l=z(s,t);const g=s.substring(s.length-l);s=s.substring(0,s.length-l),t=t.substring(0,t.length-l);const u=$e(s,t,o,c,r);return h&&u.unshift(S(C,h)),g&&u.push(S(C,g)),J(u),u}function $e(s,t,e,n,i){let o;if(!s)return[S(E,t)];if(!t)return[S(M,s)];const r=s.length>t.length?s:t,c=s.length>t.length?t:s,l=r.indexOf(c);if(l!==-1)return o=[S(E,r.substring(0,l)),S(C,c),S(E,r.substring(l+c.length))],s.length>t.length&&(o[0][0]=o[2][0]=M),o;if(c.length===1)return[S(M,s),S(E,t)];const h=Le(s,t,e);if(h){const g=h[0],u=h[1],f=h[2],p=h[3],a=h[4],y=B(g,f,e,n,i),_=B(u,p,e,n,i);return y.concat([S(C,a)],_)}return n&&s.length>100&&t.length>100?Ee(s,t,e,i):Ae(s,t,e,i)}function Ee(s,t,e,n){const i=Me(s,t);s=i.chars1,t=i.chars2;const o=i.lineArray,r=B(s,t,e,!1,n);ke(r,o),Be(r),r.push(S(C,""));let c=0,l=0,h=0,g="",u="";for(;c<r.length;){switch(r[c][0]){case E:h++,u+=r[c][1];break;case M:l++,g+=r[c][1];break;case C:if(l>=1&&h>=1){r.splice(c-l-h,l+h),c=c-l-h;const f=B(g,u,e,!1,n);for(let p=f.length-1;p>=0;p--)r.splice(c,0,f[p]);c=c+f.length}h=0,l=0,g="",u="";break}c++}return r.pop(),r}function Ae(s,t,e,n){const i=s.length,o=t.length,r=Math.ceil((i+o)/2),c=r,l=2*r,h=new Array(l),g=new Array(l);for(let v=0;v<l;v++)h[v]=-1,g[v]=-1;h[c+1]=0,g[c+1]=0;const u=i-o,f=u%2!==0;let p=0,a=0,y=0,_=0;for(let v=0;v<r&&!(new Date().getTime()>n);v++){for(let d=-v+p;d<=v-a;d+=2){const b=c+d;let m;d===-v||d!==v&&h[b-1]<h[b+1]?m=h[b+1]:m=h[b-1]+1;let w=m-d;for(;m<i&&w<o&&s.charAt(m)===t.charAt(w);)m++,w++;if(h[b]=m,m>i)a+=2;else if(w>o)p+=2;else if(f){const $=c+u-d;if($>=0&&$<l&&g[$]!==-1){const k=i-g[$];if(m>=k)return Y(s,t,e,m,w,n)}}}for(let d=-v+y;d<=v-_;d+=2){const b=c+d;let m;d===-v||d!==v&&g[b-1]<g[b+1]?m=g[b+1]:m=g[b-1]+1;let w=m-d;for(;m<i&&w<o&&s.charAt(i-m-1)===t.charAt(o-w-1);)m++,w++;if(g[b]=m,m>i)_+=2;else if(w>o)y+=2;else if(!f){const $=c+u-d;if($>=0&&$<l&&h[$]!==-1){const k=h[$],T=c+k-$;if(m=i-m,k>=m)return Y(s,t,e,k,T,n)}}}}return[S(M,s),S(E,t)]}function Y(s,t,e,n,i,o){const r=s.substring(0,n),c=t.substring(0,i),l=s.substring(n),h=t.substring(i),g=B(r,c,e,!1,o),u=B(l,h,e,!1,o);return g.concat(u)}function Me(s,t){const e=[],n={};let i=4e4;e[0]="";function o(l){let h="",g=0,u=-1,f=e.length;for(;u<l.length-1;){u=l.indexOf(`
`,g),u===-1&&(u=l.length-1);let p=l.substring(g,u+1);(n.hasOwnProperty?Object.prototype.hasOwnProperty.call(n,p):n[p]!==void 0)?h+=String.fromCharCode(n[p]):(f===i&&(p=l.substring(g),u=l.length),h+=String.fromCharCode(f),n[p]=f,e[f++]=p),g=u+1}return h}const r=o(s);i=65535;const c=o(t);return{chars1:r,chars2:c,lineArray:e}}function ke(s,t){for(let e=0;e<s.length;e++){const n=s[e][1],i=[];for(let o=0;o<n.length;o++)i[o]=t[n.charCodeAt(o)];s[e][1]=i.join("")}}function H(s,t){if(!s||!t||s.charAt(0)!==t.charAt(0))return 0;let e=0,n=Math.min(s.length,t.length),i=n,o=0;for(;e<i;)s.substring(o,i)===t.substring(o,i)?(e=i,o=e):n=i,i=Math.floor((n-e)/2+e);return i}function z(s,t){if(!s||!t||s.charAt(s.length-1)!==t.charAt(t.length-1))return 0;let e=0,n=Math.min(s.length,t.length),i=n,o=0;for(;e<i;)s.substring(s.length-i,s.length-o)===t.substring(t.length-i,t.length-o)?(e=i,o=e):n=i,i=Math.floor((n-e)/2+e);return i}function Q(s,t){const e=s.length,n=t.length;if(e===0||n===0)return 0;e>n?s=s.substring(e-n):e<n&&(t=t.substring(0,e));const i=Math.min(e,n);if(s===t)return i;let o=0,r=1;for(;;){const c=s.substring(i-r),l=t.indexOf(c);if(l===-1)return o;r+=l,(l===0||s.substring(i-r)===t.substring(0,r))&&(o=r,r++)}}function Le(s,t,e){if(e.diffTimeout<=0)return null;const n=s.length>t.length?s:t,i=s.length>t.length?t:s;if(n.length<4||i.length*2<n.length)return null;function o(a,y,_){const v=a.substring(_,_+Math.floor(a.length/4));let d=-1,b="",m,w,$,k;for(;(d=y.indexOf(v,d+1))!==-1;){const T=H(a.substring(_),y.substring(d)),O=z(a.substring(0,_),y.substring(0,d));b.length<O+T&&(b=y.substring(d-O,d)+y.substring(d,d+T),m=a.substring(0,_-O),w=a.substring(_+T),$=y.substring(0,d-O),k=y.substring(d+T))}return b.length*2>=a.length?[m,w,$,k,b]:null}const r=o(n,i,Math.ceil(n.length/4)),c=o(n,i,Math.ceil(n.length/2));let l;if(!r&&!c)return null;c?r?l=r[4].length>c[4].length?r:c:l=c:l=r;let h,g,u,f;s.length>t.length?(h=l[0],g=l[1],u=l[2],f=l[3]):(u=l[0],f=l[1],h=l[2],g=l[3]);const p=l[4];return[h,g,u,f,p]}function Be(s){let t=!1;const e=[];let n=0,i=null,o=0,r=0,c=0,l=0,h=0;for(;o<s.length;)s[o][0]===C?(e[n++]=o,r=l,c=h,l=0,h=0,i=s[o][1]):(s[o][0]===E?l+=s[o][1].length:h+=s[o][1].length,i&&i.length<=Math.max(r,c)&&i.length<=Math.max(l,h)&&(s.splice(e[n-1],0,S(M,i)),s[e[n-1]+1][0]=E,n--,n--,o=n>0?e[n-1]:-1,r=0,c=0,l=0,h=0,i=null,t=!0)),o++;for(t&&J(s),Re(s),o=1;o<s.length;){if(s[o-1][0]===M&&s[o][0]===E){const g=s[o-1][1],u=s[o][1],f=Q(g,u),p=Q(u,g);f>=p?(f>=g.length/2||f>=u.length/2)&&(s.splice(o,0,S(C,u.substring(0,f))),s[o-1][1]=g.substring(0,g.length-f),s[o+1][1]=u.substring(f),o++):(p>=g.length/2||p>=u.length/2)&&(s.splice(o,0,S(C,g.substring(0,p))),s[o-1][0]=E,s[o-1][1]=u.substring(0,u.length-p),s[o+1][0]=M,s[o+1][1]=g.substring(p),o++),o++}o++}}const W=/[^a-z0-9]/i,Z=/\s/,G=/[\r\n]/,Te=/\n\r?\n$/,je=/^\r?\n\r?\n/;function Re(s){function t(n,i){if(!n||!i)return 6;const o=n.charAt(n.length-1),r=i.charAt(0),c=o.match(W),l=r.match(W),h=c&&o.match(Z),g=l&&r.match(Z),u=h&&o.match(G),f=g&&r.match(G),p=u&&n.match(Te),a=f&&i.match(je);return p||a?5:u||f?4:c&&!h&&g?3:h||g?2:c||l?1:0}let e=1;for(;e<s.length-1;){if(s[e-1][0]===C&&s[e+1][0]===C){let n=s[e-1][1],i=s[e][1],o=s[e+1][1];const r=z(n,i);if(r){const u=i.substring(i.length-r);n=n.substring(0,n.length-r),i=u+i.substring(0,i.length-r),o=u+o}let c=n,l=i,h=o,g=t(n,i)+t(i,o);for(;i.charAt(0)===o.charAt(0);){n+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);const u=t(n,i)+t(i,o);u>=g&&(g=u,c=n,l=i,h=o)}s[e-1][1]!==c&&(c?s[e-1][1]=c:(s.splice(e-1,1),e--),s[e][1]=l,h?s[e+1][1]=h:(s.splice(e+1,1),e--))}e++}}function J(s){s.push(S(C,""));let t=0,e=0,n=0,i="",o="",r;for(;t<s.length;)switch(s[t][0]){case E:n++,o+=s[t][1],t++;break;case M:e++,i+=s[t][1],t++;break;case C:e+n>1?(e!==0&&n!==0&&(r=H(o,i),r!==0&&(t-e-n>0&&s[t-e-n-1][0]===C?s[t-e-n-1][1]+=o.substring(0,r):(s.splice(0,0,S(C,o.substring(0,r))),t++),o=o.substring(r),i=i.substring(r)),r=z(o,i),r!==0&&(s[t][1]=o.substring(o.length-r)+s[t][1],o=o.substring(0,o.length-r),i=i.substring(0,i.length-r))),t-=e+n,s.splice(t,e+n),i.length&&(s.splice(t,0,S(M,i)),t++),o.length&&(s.splice(t,0,S(E,o)),t++),t++):t!==0&&s[t-1][0]===C?(s[t-1][1]+=s[t][1],s.splice(t,1)):t++,n=0,e=0,i="",o="";break}s[s.length-1][1]===""&&s.pop();let c=!1;for(t=1;t<s.length-1;)s[t-1][0]===C&&s[t+1][0]===C&&(s[t][1].substring(s[t][1].length-s[t-1][1].length)===s[t-1][1]?(s[t][1]=s[t-1][1]+s[t][1].substring(0,s[t][1].length-s[t-1][1].length),s[t+1][1]=s[t-1][1]+s[t+1][1],s.splice(t-1,1),c=!0):s[t][1].substring(0,s[t+1][1].length)===s[t+1][1]&&(s[t-1][1]+=s[t+1][1],s[t][1]=s[t][1].substring(s[t+1][1].length)+s[t+1][1],s.splice(t+1,1),c=!0)),t++;c&&J(s)}function Oe(s){return typeof s=="string"?`'${s}'`:new De().serialize(s)}const De=function(){class s{#e=new Map;compare(e,n){const i=typeof e,o=typeof n;return i==="string"&&o==="string"?e.localeCompare(n):i==="number"&&o==="number"?e-n:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(n,!0))}serialize(e,n){if(e===null)return"null";switch(typeof e){case"string":return n?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const n=Object.prototype.toString.call(e);if(n!=="[object Object]")return this.serializeBuiltInType(n.length<10?`unknown:${n}`:n.slice(8,-1),e);const i=e.constructor,o=i===Object||i===void 0?"":i.name;if(o!==""&&globalThis[o]===i)return this.serializeBuiltInType(o,e);if(typeof e.toJSON=="function"){const r=e.toJSON();return o+(r!==null&&typeof r=="object"?this.$object(r):`(${this.serialize(r)})`)}return this.serializeObjectEntries(o,Object.entries(e))}serializeBuiltInType(e,n){const i=this["$"+e];if(i)return i.call(this,n);if(typeof n?.entries=="function")return this.serializeObjectEntries(e,n.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,n){const i=Array.from(n).sort((r,c)=>this.compare(r[0],c[0]));let o=`${e}{`;for(let r=0;r<i.length;r++){const[c,l]=i[r];o+=`${this.serialize(c,!0)}:${this.serialize(l)}`,r<i.length-1&&(o+=",")}return o+"}"}$object(e){let n=this.#e.get(e);return n===void 0&&(this.#e.set(e,`#${this.#e.size}`),n=this.serializeObject(e),this.#e.set(e,n)),n}$function(e){const n=Function.prototype.toString.call(e);return n.slice(-15)==="[native code] }"?`${e.name||""}()[native]`:`${e.name}(${e.length})${n.replace(/\s*\n\s*/g,"")}`}$Array(e){let n="[";for(let i=0;i<e.length;i++)n+=this.serialize(e[i]),i<e.length-1&&(n+=",");return n+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((n,i)=>this.compare(n,i)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const t of["Error","RegExp","URL"])s.prototype["$"+t]=function(e){return`${t}(${e})`};for(const t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])s.prototype["$"+t]=function(e){return`${t}[${e.join(",")}]`};for(const t of["BigInt64Array","BigUint64Array"])s.prototype["$"+t]=function(e){return`${t}[${e.join("n,")}${e.length>0?"n":""}]`};return s}(),Pe=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ze=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",L=[];class Ie{_data=new j;_hash=new j([...Pe]);_nDataBytes=0;_minBufferSize=0;finalize(t){t&&this._append(t);const e=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(n+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,e){const n=this._hash.words;let i=n[0],o=n[1],r=n[2],c=n[3],l=n[4],h=n[5],g=n[6],u=n[7];for(let f=0;f<64;f++){if(f<16)L[f]=t[e+f]|0;else{const b=L[f-15],m=(b<<25|b>>>7)^(b<<14|b>>>18)^b>>>3,w=L[f-2],$=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;L[f]=m+L[f-7]+$+L[f-16]}const p=l&h^~l&g,a=i&o^i&r^o&r,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),_=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),v=u+_+p+ze[f]+L[f],d=y+a;u=g,g=h,h=l,l=c+v|0,c=r,r=o,o=i,i=v+d|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+c|0,n[4]=n[4]+l|0,n[5]=n[5]+h|0,n[6]=n[6]+g|0,n[7]=n[7]+u|0}_append(t){typeof t=="string"&&(t=j.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let e,n=this._data.sigBytes/64;t?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);const i=n*16,o=Math.min(i*4,this._data.sigBytes);if(i){for(let r=0;r<i;r+=16)this._doProcessBlock(this._data.words,r);e=this._data.words.splice(0,i),this._data.sigBytes-=o}return new j(e,o)}}class j{words;sigBytes;constructor(t,e){t=this.words=t||[],this.sigBytes=e===void 0?t.length*4:e}static fromUtf8(t){const e=unescape(encodeURIComponent(t)),n=e.length,i=[];for(let o=0;o<n;o++)i[o>>>2]|=(e.charCodeAt(o)&255)<<24-o%4*8;return new j(i,n)}toBase64(){const t=[];for(let e=0;e<this.sigBytes;e+=3){const n=this.words[e>>>2]>>>24-e%4*8&255,i=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,o=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,r=n<<16|i<<8|o;for(let c=0;c<4&&e*8+c*6<this.sigBytes*8;c++)t.push(Ne.charAt(r>>>6*(3-c)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const n=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=n<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];this.sigBytes+=t.sigBytes}}function Fe(s){return new Ie().finalize(s).toBase64()}function qe(s){return Fe(Oe(s))}function Ue(s,t,e="",n=!1){const i=qe(s+e);let o=0,r=0;const c=Math.ceil(Math.log10(t.length)),l=Ve(t).flatMap((h,g)=>{r=h[0]?.offset||o;const u=h[h.length-1];u?o=u.offset+u.content.length:o+=1;const f=[...h,{content:`
`,offset:o}];return n&&f.unshift({key:`${i}-ln-${g+1}`,content:`${String(g+1).padStart(c," ")}  `,offset:r,htmlClass:"shiki-magic-move-line-number"}),f}).map((h,g)=>{const u=h;return u.key||=`${i}-${g}`,u});return{code:s,hash:i,tokens:l,lineNumbers:n}}function Ve(s){return s.map(t=>t.flatMap(e=>{if(e.content.match(/^\s+$/))return e;const n=e.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return e;const[,i,o,r]=n;if(!i&&!r)return e;const c=[{...e,offset:e.offset+i.length,content:o}];return i&&c.unshift({content:i,offset:e.offset}),r&&c.push({content:r,offset:e.offset+i.length+o.length}),c}))}function Ke(s,t){let e=0;const n=s.key;let i=0;const o=[];function r(){return i===0?(i++,n):`${n}-${i++}`}for(const c of t)c>e&&o.push({...s,content:s.content.slice(e,c),offset:s.offset+e,key:r()}),e=c;return e<s.content.length&&o.push({...s,content:s.content.slice(e),offset:s.offset+e,key:r()}),o}function x(s,t){const e=Array.from(t instanceof Set?t:new Set(t)).sort((n,i)=>n-i);return e.length?s.flatMap(n=>{const i=e.filter(o=>n.offset<o&&o<n.offset+n.content.length).map(o=>o-n.offset).sort((o,r)=>o-r);return i.length?Ke(n,i):n}):s}function He(s,t,e={}){const{splitTokens:n=!1,enhanceMatching:i=!0}=e,o=Je(s.code,t.code,e),r=n?x(s.tokens,o.flatMap(h=>h.from)):s.tokens,c=n?x(t.tokens,o.flatMap(h=>h.to)):t.tokens,l=new Set;if(o.forEach(h=>{const g=r.filter(a=>a.offset>=h.from[0]&&a.offset+a.content.length<=h.from[1]),u=c.filter(a=>a.offset>=h.to[0]&&a.offset+a.content.length<=h.to[1]);let f=0,p=0;for(;f<g.length&&p<u.length&&!(!g[f]||!u[p]);)g[f].content===u[p].content?(u[p].key=g[f].key,l.add(g[f].key),f++,p++):g[f+1]?.content===u[p].content?f++:(g[f].content===u[p+1]?.content||f++,p++)}),i)for(const h of r){if(l.has(h.key)||h.content.length<3||!h.content.match(/^[\w-]+$/))continue;const g=c.find(u=>u.content===h.content&&!l.has(u.key));g&&(g.key=h.key,l.add(h.key))}return{from:r.length===s.tokens.length?s:{...s,tokens:r},to:c.length===t.tokens.length?t:{...t,tokens:c}}}function Je(s,t,e={}){let n=B(s,t);n=e.diffCleanup?.(n)||n;let i="",o="";const r=[];for(const[c,l]of n)c===0?(r.push({from:[i.length,i.length+l.length],to:[o.length,o.length+l.length],content:l}),i+=l,o+=l):c===-1?i+=l:c===1&&(o+=l);if(i!==s||o!==t)throw new Error("Content mismatch");return r}const A="shiki-magic-move",N=`${A}-leave-from`,Xe=`${A}-leave-to`,ee=`${A}-leave-active`,I=`${A}-enter-from`,F=`${A}-enter-to`,te=`${A}-enter-active`,se=`${A}-move`,ne=`${A}-container-resize`,ie=`${A}-container-restyle`,Ye={globalScale:1,duration:500,delayMove:.3,delayLeave:.1,delayEnter:.7,delayContainer:.4,stagger:0,easing:"ease",animateContainer:!0,containerStyle:!0};class Qe{mapDom=new Map;previousPromises=[];isFirstRender=!0;constructor(t,e={}){this.options={...Ye,...e},typeof t=="string"?this.container=document.querySelector(t):this.container=t,this.anchor=document.createElement("span"),this.anchor.style.position="absolute",this.anchor.style.top="0",this.anchor.style.left="0",this.anchor.style.height="1px",this.anchor.style.width="1px",this.container.prepend(this.anchor)}applyElementContent(t,e){e.content!==`
`&&(t.textContent=e.content,t.classList.add(`${A}-item`))}applyElementStyle(t,e){if(e.htmlStyle)if(typeof e.htmlStyle=="string")t.setAttribute("style",e.htmlStyle);else for(const[n,i]of Object.entries(e.htmlStyle))t.style.setProperty(n,i);e.htmlClass&&(t.className=[`${A}-item`,e.htmlClass].join(" ")),e.color&&(t.style.color=e.color),e.bgColor&&(t.style.backgroundColor=e.bgColor)}applyElement(t,e){this.applyElementContent(t,e),this.applyElementStyle(t,e)}applyNodeStyle(t,e){if(e.bg&&(t.style.backgroundColor=e.bg),e.fg&&(t.style.color=e.fg),e.rootStyle){const n=e.rootStyle.split(";");for(const i of n){const[o,r]=i.split(":");o&&r&&t.style.setProperty(o.trim(),r.trim())}}}applyContainerStyle(t){this.options.containerStyle&&this.applyNodeStyle(this.container,t)}registerTransitionEnd(t,e){return()=>{let n=!1,i=()=>{};const o=Promise.race([Promise.allSettled(t.getAnimations().map(r=>r.finished)).then(()=>e()),new Promise(r=>{i=()=>{n||(n=!0,e(),r())}})]);return o.resolve=i,o}}setCssVariables(){this.container.style.setProperty("--smm-duration",`${this.options.duration}ms`),this.container.style.setProperty("--smm-delay-move",`${this.options.delayMove}`),this.container.style.setProperty("--smm-delay-leave",`${this.options.delayLeave}`),this.container.style.setProperty("--smm-delay-enter",`${this.options.delayEnter}`),this.container.style.setProperty("--smm-delay-container",`${this.options.delayContainer}`),this.container.style.setProperty("--smm-easing",this.options.easing),this.container.style.setProperty("--smm-stagger","0")}replace(t){const e=new Map,n=t.tokens.map(i=>{if(this.mapDom.has(i.key)){const o=this.mapDom.get(i.key);return this.applyElement(o,i),e.set(i.key,o),this.mapDom.delete(i.key),o}else{const o=document.createElement(i.content===`
`?"br":"span");return this.applyElement(o,i),e.set(i.key,o),o}});this.container.replaceChildren(this.anchor,...n),this.applyContainerStyle(t),this.mapDom=e}render(t){this.setCssVariables();const e=new Map,n=[],i=[],o=[],r=[];this.previousPromises.forEach(a=>a.resolve()),this.previousPromises=[];const c=[],{globalScale:l}=this.options,h=new Map;let g=this.anchor.getBoundingClientRect();const u=this.container.getBoundingClientRect();for(const a of this.mapDom.values()){const y=a.getBoundingClientRect();h.set(a,{x:y.x-g.x,y:y.y-g.y})}const f=t.tokens.map(a=>{if(this.mapDom.has(a.key)){const y=this.mapDom.get(a.key);return this.applyElementContent(y,a),c.push(()=>{this.applyElementStyle(y,a)}),n.push(y),e.set(a.key,y),this.mapDom.delete(a.key),y}else{const y=document.createElement(a.content===`
`?"br":"span");return this.applyElement(y,a),i.push(y),e.set(a.key,y),y}});for(const[a,y]of this.mapDom)y.tagName!=="BR"&&o.push(y);for(const a of o)a.style.position="absolute";if(this.container.replaceChildren(this.anchor,...f,...o),this.mapDom=e,o.forEach((a,y)=>{a.style.position="absolute";const _=h.get(a);a.style.top=`${_.y/l}px`,a.style.left=`${_.x/l}px`,this.options.stagger?a.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):a.style.removeProperty("--smm-stagger"),a.classList.add(N),a.classList.add(ee),c.unshift(()=>{a.classList.remove(N),a.classList.add(Xe)}),r.push(this.registerTransitionEnd(a,()=>{a.classList.remove(N),a.classList.remove(ee),a.classList.remove(F),a.remove()}))}),this.isFirstRender||i.forEach((a,y)=>{a.classList.add(I),a.classList.add(te),this.options.stagger?a.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):a.style.removeProperty("--smm-stagger"),c.push(()=>{a.classList.remove(I),a.classList.add(F)}),r.push(this.registerTransitionEnd(a,()=>{a.classList.remove(I),a.classList.remove(te),a.classList.remove(F)}))}),g=this.anchor.getBoundingClientRect(),n.forEach((a,y)=>{const _=a.getBoundingClientRect(),v={x:_.x-g.x,y:_.y-g.y},d=h.get(a);a.style.transitionDuration=a.style.transitionDelay="0ms";const b=(d.x-v.x)/l,m=(d.y-v.y)/l;a.style.transform=`translate(${b}px, ${m}px)`,this.options.stagger?a.style.setProperty("--smm-stagger",`${y*this.options.stagger}ms`):a.style.removeProperty("--smm-stagger"),c.unshift(()=>{a.classList.add(se),a.style.transform=a.style.transitionDuration=a.style.transitionDelay=""}),r.push(this.registerTransitionEnd(a,()=>{a.classList.remove(se)}))}),this.options.animateContainer&&!this.isFirstRender){const a=this.container.getBoundingClientRect();(a.width!==u.width||a.height!==u.height)&&(this.container.style.transitionDuration=this.container.style.transitionDelay="0ms",this.container.style.height=`${u.height/l}px`,this.container.style.width=`${u.width/l}px`,c.unshift(()=>{this.container.classList.add(ne),this.container.style.transitionDuration=this.container.style.transitionDelay="",this.container.style.height=`${a.height/l}px`,this.container.style.width=`${a.width/l}px`}),r.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(ne),this.container.style.height=this.container.style.width=""})))}this.options.containerStyle&&(this.isFirstRender?this.applyContainerStyle(t):(c.push(()=>{this.container.classList.add(ie),this.applyContainerStyle(t)}),r.push(this.registerTransitionEnd(this.container,()=>{this.container.classList.remove(ie)})))),We(),c.forEach(a=>a());const p=r.map(a=>a());return this.isFirstRender=!1,this.previousPromises=p,Promise.all(p).then()}}function We(){return document.body.offsetHeight}const Ze=P({name:"ShikiMagicMoveRenderer",props:{animate:{type:Boolean,default:!0},tokens:{type:Object,required:!0},previous:{type:Object,required:!1},options:{type:Object}},emits:["end","start"],setup(s,{emit:t}){const e=q();let n=!1;return re(()=>{e.value.innerHTML="",n=!0;const i=new Qe(e.value);le(()=>s.tokens,async o=>{if(Object.assign(i.options,s.options),s.animate){s.previous&&i.replace(s.previous),await U();const r=i.render(o);await U(),t("start"),await r,t("end")}else i.replace(o)},{immediate:!0})}),()=>D("pre",{ref:e,class:"shiki-magic-move-container"},n?void 0:ae(s.tokens.tokens,i=>i.content===`
`?D("br",{key:i.key}):D("span",{style:[{color:i.color},i.htmlStyle],class:["shiki-magic-move-item",i.htmlClass],key:i.key},i.content)))}}),Ge=P({name:"ShikiMagicMovePrecompiled",props:{steps:{type:Array,required:!0},step:{type:Number,default:0},animate:{type:Boolean,default:!0},options:{type:Object,default:()=>({})}},emits:["start","end"],setup(s,{emit:t}){let n=Ue("",[]);const i=oe(()=>{const o=He(n,s.steps[Math.min(s.step,s.steps.length-1)],s.options);return n=o.to,o});return()=>D(Ze,{tokens:i.value.to,previous:i.value.from,options:s.options,animate:s.animate,onStart:()=>t("start"),onEnd:()=>t("end")})}}),xe=P({__name:"TitleIcon",props:{title:{}},setup(s){const t={pnpm:"i-vscode-icons:file-type-light-pnpm",npm:"i-vscode-icons:file-type-npm",yarn:"i-vscode-icons:file-type-yarn",bun:"i-vscode-icons:file-type-bun",deno:"i-vscode-icons:file-type-deno",vue:"i-vscode-icons:file-type-vue",svelte:"i-vscode-icons:file-type-svelte",angular:"i-vscode-icons:file-type-angular",react:"i-vscode-icons:file-type-reactjs",next:"i-vscode-icons:file-type-light-next",nuxt:"i-vscode-icons:file-type-nuxt",solid:"logos:solidjs-icon",astro:"i-vscode-icons:file-type-light-astro",rollup:"i-vscode-icons:file-type-rollup",webpack:"i-vscode-icons:file-type-webpack",vite:"i-vscode-icons:file-type-vite",esbuild:"i-vscode-icons:file-type-esbuild","package.json":"i-vscode-icons:file-type-node","tsconfig.json":"i-vscode-icons:file-type-tsconfig",".npmrc":"i-vscode-icons:file-type-npm",".editorconfig":"i-vscode-icons:file-type-editorconfig",".eslintrc":"i-vscode-icons:file-type-eslint",".eslintignore":"i-vscode-icons:file-type-eslint","eslint.config":"i-vscode-icons:file-type-eslint",".gitignore":"i-vscode-icons:file-type-git",".gitattributes":"i-vscode-icons:file-type-git",".env":"i-vscode-icons:file-type-dotenv",".env.example":"i-vscode-icons:file-type-dotenv",".vscode":"i-vscode-icons:file-type-vscode","tailwind.config":"vscode-icons:file-type-tailwind","uno.config":"i-vscode-icons:file-type-unocss","unocss.config":"i-vscode-icons:file-type-unocss",".oxlintrc":"i-vscode-icons:file-type-oxlint","vue.config":"i-vscode-icons:file-type-vueconfig",".mts":"i-vscode-icons:file-type-typescript",".cts":"i-vscode-icons:file-type-typescript",".ts":"i-vscode-icons:file-type-typescript",".tsx":"i-vscode-icons:file-type-typescript",".mjs":"i-vscode-icons:file-type-js",".cjs":"i-vscode-icons:file-type-js",".json":"i-vscode-icons:file-type-json",".js":"i-vscode-icons:file-type-js",".jsx":"i-vscode-icons:file-type-js",".md":"i-vscode-icons:file-type-markdown",".py":"i-vscode-icons:file-type-python",".ico":"i-vscode-icons:file-type-favicon",".html":"i-vscode-icons:file-type-html",".css":"i-vscode-icons:file-type-css",".scss":"i-vscode-icons:file-type-scss",".yml":"i-vscode-icons:file-type-light-yaml",".yaml":"i-vscode-icons:file-type-light-yaml",".php":"i-vscode-icons:file-type-php"};function e(n){const i=n.match(/~([^~]+)~/g);if(i&&i.length>0)return i[0].slice(1,-1);const o=Object.keys(t).sort((r,c)=>c.length-r.length);for(const r of o)if(n.toLowerCase().includes(r.toLowerCase()))return t[r];return""}return(n,i)=>e(n.title)?(K(),V("div",{key:0,class:he(`${e(n.title)} w-3.5 h-3.5 relative`)},null,2)):ce("v-if",!0)}}),et={key:0,class:"slidev-code-block-title"},tt={class:"leading-1em"},rt=P({__name:"ShikiMagicMove",props:{at:{type:[String,Number],default:"+1"},stepsLz:{type:String,required:!0},stepRanges:{type:Array,required:!0},lines:{type:Boolean,default:pe.lineNumbers},title:{type:String,default:""}},setup(s){const t=s,e=JSON.parse(_e.decompressFromBase64(t.stepsLz)),{$clicksContext:n,$scale:i,$zoom:o}=we(),{isPrintMode:r}=ye(),c=me(),l=q(0),h=q(),g=oe(()=>t.stepRanges.map(u=>u.length?u:["all"]));return ue(()=>{n?.unregister(c)}),re(()=>{if(!n)return;if(g.value.length!==e.length)throw new Error("[slidev] The length of stepRanges does not match the length of steps, this is an internal error.");const u=g.value.map(p=>p.length).reduce((p,a)=>p+a,0),f=n.calculateSince(t.at,u-1);n.register(c,f),le(()=>n.current,()=>{const p=f?n.current-f.start:de;let a=e.length-1,y=0,_="all";for(let v=0;v<g.value.length;v++){const d=g.value[v];if(p<y+d.length-1){a=v,_=d[p-y+1];break}y+=d.length||1}U(async()=>{l.value=a,await ve(0);const v=h.value?.querySelector(".shiki");if(!v)return;const b=Array.from(v.children).slice(1).filter(m=>!m.className.includes("shiki-magic-move-leave")).reduce((m,w)=>(w.tagName==="BR"?m.push([]):m[m.length-1].push(w),m),[[]]);be(_,b.length,1,m=>b[m])})},{immediate:!0})}),(u,f)=>(K(),V("div",{ref_key:"container",ref:h,class:"slidev-code-wrapper slidev-code-magic-move relative"},[s.title?(K(),V("div",et,[X(xe,{title:s.title},null,8,["title"]),ge("div",tt,fe(s.title.replace(/~([^~]+)~/g,"").trim()),1)])):ce("v-if",!0),X(R(Ge),{class:"slidev-code relative shiki overflow-visible",steps:R(e),step:l.value,animate:!R(r),options:{globalScale:R(i)*R(o),duration:800,stagger:1}},null,8,["steps","step","animate","options"])],512))}});export{rt as _};
